
# 1.1 响应链

> First Responder -> First Re...的试图控制器（若有） -> 父容器（若有）-> 父容器试图控制器 -> UIWindow -> UIApplication -> 应用程序委托对象



---
WT:

如果某个响应者截获了某个事件，那么该响应者要根据条件决定是否处理该事件时，则需要处理方法中手动传递该事件。

```python

- (void) handleTapEvent:(UIEvent *) event
{
    if (condition){
        // 处理事件
    }
    else {
        [self.nextResponder handleTapEvent:event];
    }
}

```

# 1.2 响应触碰方法

UIResponder 的4个方法：
> 手指开始触碰控件或窗口事件时激发

-touchesBegin:(NSSet *)touches withEvent:(UIEvent *)event;

> 注解：

```python

// touches 代表用户触碰时的多个手指，包含元素为UITouch

// UITouch 对象代表一个触碰事件，tapCount 返回的触碰屏幕的次数。

NSUInteger fingerNum = [touches count];
NSUInteger tapCount = [[touches anyObject] tapCount];

```

> 移动

-touchesMoved:...

> 结束

-touchesEnded:...

> 系统事件（如内存低）终止触摸事件

-touchesCancled:...




# 1.3 手势（UIGestureRecognizer）

> UI控件的属性
* userInteractionEnabled 设置是否可交互
* multipleTouchEnabled  设置是否支持多点触控（YES 可支持）

```python

// 1、返回手势在View中的触碰位置
- locationInView:(UIView *)view;

// 2、返回该手势的第 touchIndex 个触碰点在 view 中的触碰位置
- locationOfTouch:(NSUInteger) touchIndex inView:(UIView *)view;

// 3、返回触碰点的数量（手指数）
- numberOfTouches:

// 4、返回激发该手势的 UI 控件
- view:

// 5、设置和返回手势是否可用
- enabled:

// 6、获取手势所处的状态
- state:
// UIGestureRecognizerStateBegan等

```

## 1、点击（Tap）

```python

// 属性
// 1、指定该手势处理器只处理几次触碰事件。
numberOfTapsRequired:

// 2、指定该手势处理器只处理几个手指的触碰事件。
numberOfTouchesRequired:

```

## 2、捏合（Pinch）

```python

// 属性
// 1、获取捏合比例 scale
// 2、获取捏合速度 velocity

```

> 实际应用：图片缩放
```python

- (void) scaleImage:(UIPinchGes... *) gesture
{
    CGFloat scale = gesture.scale;

    if (gesture.state == UIGestureRecognizerBegin) {
        // 计算当前的缩放比
        // 初始化时，是1
        currentScale = _imageView.image.size.width / originImage.size.width;
    }
    // 计算图片大小
    CGSize * tagetSize = CGSizeMake(originImage.size.width*scale*currentScale, originImage.size.height*scale*currentScale);

    // 设置图片
    _imageView.image = [originImage ...];
}

```

## 3、旋转（Rotation）

```python

// 1、获取旋转角度 rotation
// 2、获取旋转速度 velocity

```

## 4、轻扫（Swipe）

```python

// 1、方向
direction
// UISwipeGestureRecognizerDirectionRight等

// 2、指定该手势处理器只处理几个手指的事件
numberOfTouchesRequired

```

## 5、拖动（Pan）

```python

// 1、设置最多可支持几个手指
maximumNumberOfTouches

// 2、设置最少需要手指数
minimumNumberOfTouches

// 3、获取手势在指定控件上的位移
- (CGPoint *)translationInView
// 返回的点中，x表水平方向位移，y表竖直...

// 4、拖动速度
- (CGPoint *)velocityInView
// x表水平速度，y表...

```


## 6、长按（LongPress）

```python

// 1、最小长按秒数（默认0.5）
minimumPressDuration

// 2、规定手指数
numberOfTouchesRequired

// 3、允许用户移动的最大距离
allowableMovement

```



# 1.4 自定义手势

2 步：
* 1、继承 UIGestureRecognizer
* 2、4 个方法
